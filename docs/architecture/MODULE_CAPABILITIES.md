# DES-V2 æ¨¡çµ„åŠŸèƒ½å®Œæ•´æ¸…å–®

> **æ›´æ–°æ—¥æœŸ**: 2025-12-08

---

## ğŸ”„ æ¨¡çµ„é–“èª¿ç”¨æµç¨‹

### æ ¸å¿ƒäº¤æ˜“æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              main.go (å•Ÿå‹•å…¥å£)                                â”‚
â”‚   åˆå§‹åŒ–æ‰€æœ‰æ¨¡çµ„ä¸¦å»ºç«‹ä¾è³´é—œä¿‚                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                             â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  pkg/config   â”‚          â”‚   pkg/db      â”‚           â”‚ pkg/exchanges  â”‚
â”‚  é…ç½®è¼‰å…¥      â”‚          â”‚  è³‡æ–™åº«é€£ç·š    â”‚           â”‚  äº¤æ˜“æ‰€ Gateway â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è¡Œæƒ… â†’ ç­–ç•¥ â†’ è¨‚å–®æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. è¡Œæƒ…æ¥æ”¶                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Binance WebSocket â”€â”€â–¶ market/feed â”€â”€â–¶ events.Bus â”€â”€â–¶ EventPriceTick       â”‚
â”‚                                              â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. ç­–ç•¥è™•ç†                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  strategy/engine.handleTick()                                               â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”œâ”€â”€â–¶ indicators/ (è¨ˆç®— MA, RSI)                                      â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â””â”€â”€â–¶ Strategy.OnTick() â”€â”€â–¶ ç”¢ç”Ÿä¿¡è™Ÿ â”€â”€â–¶ events.Bus                   â”‚
â”‚                                                      â”‚                      â”‚
â”‚                                      EventStrategySignal                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. é¢¨æ§è©•ä¼°                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  main.go (ä¿¡è™Ÿç›£è½)                                                          â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â””â”€â”€â–¶ risk/manager.EvaluateSignal()                                   â”‚
â”‚                    â”‚                                                        â”‚
â”‚                    â”œâ”€â”€â–¶ é€šé â”€â”€â–¶ ç¹¼çºŒåˆ°è¨‚å–®                                   â”‚
â”‚                    â””â”€â”€â–¶ æ‹’çµ• â”€â”€â–¶ EventRiskAlert â”€â”€â–¶ çµæŸ                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. è¨‚å–®åŸ·è¡Œ                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  order/queue.Enqueue(order)                                                 â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â–¼                                                                    â”‚
â”‚  order/executor.Handle()                                                    â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”œâ”€â”€â–¶ balance/manager.Lock() (é–å®šé¤˜é¡)                                â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”œâ”€â”€â–¶ pkg/exchanges/gateway.SubmitOrder() (æäº¤åˆ°äº¤æ˜“æ‰€)               â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”œâ”€â”€â–¶ pkg/db.CreateOrder() (æŒä¹…åŒ–)                                   â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â””â”€â”€â–¶ events.Bus.Publish(EventOrderUpdate)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. æˆäº¤è™•ç†                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  order/user_stream (ç›£è½æˆäº¤å›å ±)                                            â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â””â”€â”€â–¶ events.Bus.Publish(EventOrderFilled)                            â”‚
â”‚                    â”‚                                                        â”‚
â”‚                    â–¼                                                        â”‚
â”‚  main.go (æˆäº¤ç›£è½)                                                          â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”œâ”€â”€â–¶ state/manager.RecordFill() (æ›´æ–°æŒå€‰)                            â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”œâ”€â”€â–¶ balance/manager.Deduct() (æ‰£é™¤é¤˜é¡)                              â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”œâ”€â”€â–¶ risk/stop_loss.AddPosition() (è¨»å†Šæ­¢æ)                          â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â””â”€â”€â–¶ order/executor.checkProfitTarget() (åˆ©æ½¤ç›®æ¨™æª¢æŸ¥)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API è«‹æ±‚æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ HTTP Request                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ api/middleware (CORS, RateLimit, Auth, Timeout)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ api/handler.routes() â”€â”€â–¶ api/controllers                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                      â”‚
                                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ engine/Impl (Engine Service ä»‹é¢)                                           â”‚
â”‚      â”‚                                                                      â”‚
â”‚      â”œâ”€â”€â–¶ strategy/engine (ç­–ç•¥æ“ä½œ)                                         â”‚
â”‚      â”œâ”€â”€â–¶ risk/manager (é¢¨æ§æŸ¥è©¢)                                            â”‚
â”‚      â”œâ”€â”€â–¶ balance/manager (é¤˜é¡æŸ¥è©¢)                                         â”‚
â”‚      â””â”€â”€â–¶ pkg/db (è³‡æ–™åº«æŸ¥è©¢)                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡çµ„ä¾è³´é—œä¿‚åœ–

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   main.go   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                     â”‚                     â”‚
     â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   api   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    engine    â”‚â—€â”€â”€â”€â”€â”€â”‚  events   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚                     â”‚                    â”‚
     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
     â”‚    â”‚                â”‚                â”‚   â”‚
     â”‚    â–¼                â–¼                â–¼   â”‚
     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
     â”‚ â”‚strategyâ”‚   â”‚   risk   â”‚   â”‚ balance â”‚ â”‚
     â”‚ â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
     â”‚     â”‚             â”‚              â”‚      â”‚
     â”‚     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚      â”‚
     â”‚     â”‚    â”‚                 â”‚     â”‚      â”‚
     â”‚     â–¼    â–¼                 â–¼     â–¼      â”‚
     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
     â”‚ â”‚   order    â”‚â—€â”€â”€â”€â”€â”€â”‚    state      â”‚   â”‚
     â”‚ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
     â”‚       â”‚                                 â”‚
     â”‚       â–¼                                 â”‚
     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
     â””â–¶â”‚              pkg/db                 â”‚â—€â”˜
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚          pkg/exchanges              â”‚
       â”‚   (Binance Spot/Futures Gateway)    â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### äº‹ä»¶æµå‘

```
è¡Œæƒ…äº‹ä»¶:     Binance WS â”€â”€â–¶ market â”€â”€â–¶ EventPriceTick â”€â”€â–¶ strategy
ä¿¡è™Ÿäº‹ä»¶:     strategy â”€â”€â–¶ EventStrategySignal â”€â”€â–¶ main (é¢¨æ§) â”€â”€â–¶ order
è¨‚å–®äº‹ä»¶:     order â”€â”€â–¶ EventOrderUpdate â”€â”€â–¶ WebSocket â”€â”€â–¶ Frontend
æˆäº¤äº‹ä»¶:     user_stream â”€â”€â–¶ EventOrderFilled â”€â”€â–¶ main â”€â”€â–¶ state, balance, risk
é¢¨æ§äº‹ä»¶:     risk â”€â”€â–¶ EventRiskAlert â”€â”€â–¶ WebSocket â”€â”€â–¶ Frontend
```

---

## ğŸ“ ç›®éŒ„çµæ§‹


```
backend/cmd/trading-core/
â”œâ”€â”€ internal/           # å…§éƒ¨æ¨¡çµ„ (14 å€‹)
â”‚   â”œâ”€â”€ api/           # REST API
â”‚   â”œâ”€â”€ balance/       # é¤˜é¡ç®¡ç†
â”‚   â”œâ”€â”€ data/          # æ­·å²æ•¸æ“š
â”‚   â”œâ”€â”€ engine/        # Engine æœå‹™å±¤
â”‚   â”œâ”€â”€ events/        # äº‹ä»¶ç¸½ç·š
â”‚   â”œâ”€â”€ indicators/    # æŠ€è¡“æŒ‡æ¨™
â”‚   â”œâ”€â”€ market/        # è¡Œæƒ…è™•ç†
â”‚   â”œâ”€â”€ monitor/       # ç³»çµ±ç›£æ§
â”‚   â”œâ”€â”€ order/         # è¨‚å–®åŸ·è¡Œ
â”‚   â”œâ”€â”€ persistence/   # æŒä¹…åŒ–
â”‚   â”œâ”€â”€ reconciliation/# å°è³¬
â”‚   â”œâ”€â”€ risk/          # é¢¨æ§ç®¡ç†
â”‚   â”œâ”€â”€ state/         # ç‹€æ…‹ç®¡ç†
â”‚   â””â”€â”€ strategy/      # ç­–ç•¥å¼•æ“
â”œâ”€â”€ pkg/               # å…±ç”¨å¥—ä»¶ (7 å€‹)
â”‚   â”œâ”€â”€ binance/       # Binance å®¢æˆ¶ç«¯
â”‚   â”œâ”€â”€ cache/         # ç·©å­˜
â”‚   â”œâ”€â”€ config/        # é…ç½®
â”‚   â”œâ”€â”€ db/            # è³‡æ–™åº«
â”‚   â”œâ”€â”€ exchanges/     # äº¤æ˜“æ‰€ Gateway
â”‚   â”œâ”€â”€ license/       # æˆæ¬Š
â”‚   â””â”€â”€ market/        # å¸‚å ´æ•¸æ“š
â””â”€â”€ main.go            # æ‡‰ç”¨ç¨‹å¼å…¥å£
```

---

## ğŸ”· Internal æ¨¡çµ„è©³æƒ…

### 1. api/ - REST API å±¤

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `handler.go` | Server çµæ§‹ã€è·¯ç”±å®šç¾©ã€NewServer |
| `controllers.go` | æ¥­å‹™é‚è¼¯æ§åˆ¶å™¨ |
| `middleware.go` | CORSã€RateLimitã€Timeout |
| `auth.go` | JWT èªè­‰ã€ç”¨æˆ¶è¨»å†Šç™»å…¥ |
| `websocket.go` | WebSocket æ¨é€ |

**API ç«¯é»**:
- `GET /health` - å¥åº·æª¢æŸ¥
- `GET /ws` - WebSocket
- `POST /api/auth/register` - è¨»å†Š
- `POST /api/auth/login` - ç™»å…¥
- `GET /api/strategies` - ç­–ç•¥åˆ—è¡¨
- `POST /api/strategies/:id/start` - å•Ÿå‹•ç­–ç•¥
- `POST /api/strategies/:id/pause` - æš«åœç­–ç•¥
- `POST /api/strategies/:id/stop` - åœæ­¢ç­–ç•¥
- `POST /api/strategies/:id/panic` - ç·Šæ€¥å¹³å€‰
- `PUT /api/strategies/:id/params` - ä¿®æ”¹åƒæ•¸
- `PUT /api/strategies/:id/binding` - ç¶å®šé€£ç·š
- `GET /api/strategies/:id/performance` - ç¸¾æ•ˆ
- `GET /api/orders` - è¨‚å–®åˆ—è¡¨
- `GET /api/positions` - æŒå€‰åˆ—è¡¨
- `GET /api/balance` - é¤˜é¡
- `GET /api/risk` - é¢¨æ§æŒ‡æ¨™
- `GET /api/connections` - é€£ç·šåˆ—è¡¨
- `POST /api/connections` - å‰µå»ºé€£ç·š
- `DELETE /api/connections/:id` - åˆªé™¤é€£ç·š

---

### 2. balance/ - é¤˜é¡ç®¡ç†

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `manager.go` | é¤˜é¡ç®¡ç†å™¨ |

**åŠŸèƒ½**:
- `NewManager()` - å‰µå»ºç®¡ç†å™¨
- `Start()` - å®šæœŸåŒæ­¥é¤˜é¡
- `Sync()` - å¾äº¤æ˜“æ‰€åŒæ­¥
- `Lock()` - é–å®šé¤˜é¡ (ä¸‹å–®æ™‚)
- `Unlock()` - è§£é–é¤˜é¡ (å–æ¶ˆæ™‚)
- `Deduct()` - æ‰£é™¤é¤˜é¡ (æˆäº¤å¾Œ)
- `Add()` - å¢åŠ é¤˜é¡ (è³£å‡ºå¾Œ)
- `GetBalance()` - å–å¾—å¿«ç…§
- `SetInitialBalance()` - è¨­å®šåˆå§‹ (Dry-Run)

---

### 3. data/ - æ­·å²æ•¸æ“š

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `historical.go` | æ­·å² K ç·šç²å– |

**åŠŸèƒ½**:
- `GetKlines()` - ç²å–æ­·å² K ç·š
- ç­–ç•¥é ç†±ç”¨

---

### 4. engine/ - Engine æœå‹™å±¤ (Phase 1)

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `service.go` | Service ä»‹é¢å®šç¾© |
| `types.go` | DTO é¡å‹ |
| `impl.go` | ä»‹é¢å¯¦ä½œ |

**ä»‹é¢æ–¹æ³•**:
- ç­–ç•¥æŒ‡ä»¤: `StartStrategy`, `PauseStrategy`, `StopStrategy`, `PanicSellStrategy`, `UpdateStrategyParams`, `BindStrategyConnection`
- ç­–ç•¥æŸ¥è©¢: `ListStrategies`, `GetStrategyStatus`, `GetStrategyPosition`
- æŒå€‰è¨‚å–®: `GetPositions`, `GetOpenOrders`
- é¢¨éšªç¸¾æ•ˆ: `GetRiskMetrics`, `GetStrategyPerformance`
- é¤˜é¡: `GetBalance`
- ç³»çµ±: `GetSystemStatus`

---

### 5. events/ - äº‹ä»¶ç¸½ç·š

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `bus.go` | Pub/Sub äº‹ä»¶ç¸½ç·š |
| `types.go` | äº‹ä»¶é¡å‹å®šç¾© |
| `user_stream_events.go` | User Stream äº‹ä»¶ |

**äº‹ä»¶é¡å‹**:
- `EventPriceTick` - åƒ¹æ ¼æ›´æ–°
- `EventStrategySignal` - ç­–ç•¥ä¿¡è™Ÿ
- `EventRiskAlert` - é¢¨æ§å‘Šè­¦
- `EventOrderUpdate` - è¨‚å–®æ›´æ–°
- `EventOrderFilled` - è¨‚å–®æˆäº¤
- `EventPositionUpdate` - æŒå€‰æ›´æ–°

---

### 6. indicators/ - æŠ€è¡“æŒ‡æ¨™

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `engine.go` | æŒ‡æ¨™è¨ˆç®—å¼•æ“ |
| `ma.go` | ç§»å‹•å¹³å‡ç·š |
| `rsi.go` | RSI æŒ‡æ¨™ |

**æ”¯æ´æŒ‡æ¨™**:
- MA (ç§»å‹•å¹³å‡ç·š)
- RSI (ç›¸å°å¼·å¼±æŒ‡æ¨™)

---

### 7. market/ - è¡Œæƒ…è™•ç†

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `feed.go` | è¡Œæƒ… Feed ç®¡ç† |
| `kline.go` | Kç·šèšåˆ |
| `mock.go` | æ¨¡æ“¬è¡Œæƒ… |

**åŠŸèƒ½**:
- WebSocket è¡Œæƒ…è¨‚é–±
- Kç·šèšåˆå’Œåˆ†ç™¼
- æ¨¡æ“¬æ•¸æ“šç”Ÿæˆ

---

### 8. monitor/ - ç³»çµ±ç›£æ§

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `monitor.go` | ç›£æ§å¼•æ“ |
| `metrics.go` | ç³»çµ±æŒ‡æ¨™ |
| `alerts.go` | å‘Šè­¦éšŠåˆ— |
| `rules.go` | ç›£æ§è¦å‰‡ |

**åŠŸèƒ½**:
- ç³»çµ±æ€§èƒ½ç›£æ§
- æŒ‡æ¨™æ”¶é›† (äº¤æ˜“æ•¸ã€å»¶é²ç­‰)
- å‘Šè­¦è§¸ç™¼

---

### 9. order/ - è¨‚å–®åŸ·è¡Œ

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `types.go` | è¨‚å–®é¡å‹å®šç¾© |
| `queue.go` | è¨‚å–®éšŠåˆ— (å„ªå…ˆç´š) |
| `executor.go` | è¨‚å–®åŸ·è¡Œå™¨ |
| `dry_run.go` | æ¨¡æ“¬åŸ·è¡Œ |
| `user_stream_spot.go` | Spot User Stream |
| `user_stream_futures.go` | Futures User Stream |
| `worker_pool.go` | Worker Pool |
| `async_executor.go` | ç•°æ­¥åŸ·è¡Œå™¨ |

**åŠŸèƒ½**:
- `NewQueue()` - å‰µå»ºå„ªå…ˆç´šéšŠåˆ—
- `Enqueue()` / `Dequeue()` - å…¥éšŠ/å‡ºéšŠ
- `Handle()` - åŸ·è¡Œè¨‚å–®
- `gatewayForOrder()` - äº¤æ˜“æ‰€è·¯ç”±
- `checkProfitTarget()` - åˆ©æ½¤ç›®æ¨™æª¢æŸ¥ (æ–°)
- Worker Pool é™åˆ¶ä¸¦ç™¼
- Async Executor éé˜»å¡åŸ·è¡Œ
- User Data Stream è¨‚å–®å›å ±

---

### 10. persistence/ - æŒä¹…åŒ–

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `batch_writer.go` | æ‰¹é‡å¯«å…¥å™¨ |

**åŠŸèƒ½**:
- æ‰¹é‡ DB å¯«å…¥
- æ¸›å°‘ I/O é–‹éŠ·

---

### 11. reconciliation/ - å°è³¬

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `reconciler.go` | å°è³¬å¼•æ“ |

**åŠŸèƒ½**:
- æœ¬åœ°èˆ‡äº¤æ˜“æ‰€æŒå€‰å°è³¬
- å·®ç•°æª¢æ¸¬å’Œä¿®æ­£

---

### 12. risk/ - é¢¨æ§ç®¡ç†

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `types.go` | é¢¨æ§é…ç½®é¡å‹ |
| `manager.go` | é¢¨æ§ç®¡ç†å™¨ |
| `rules.go` | é¢¨æ§è¦å‰‡ |
| `stop_loss.go` | æ­¢æç®¡ç† |

**åŠŸèƒ½**:
- `EvaluateSignal()` - è©•ä¼°äº¤æ˜“ä¿¡è™Ÿ
- `CheckDailyLossLimit()` - æ¯æ—¥è™§æé™åˆ¶
- `CheckMaxPosition()` - æœ€å¤§æŒå€‰æª¢æŸ¥
- `UpdateMetrics()` - æ›´æ–°é¢¨æ§æŒ‡æ¨™
- æ­¢æè¿½è¹¤å’Œè§¸ç™¼

---

### 13. state/ - ç‹€æ…‹ç®¡ç†

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `manager.go` | ç‹€æ…‹ç®¡ç†å™¨ |

**åŠŸèƒ½**:
- `RecordFill()` - è¨˜éŒ„æˆäº¤
- æŒå€‰ç‹€æ…‹è¿½è¹¤
- å¹³å‡åƒ¹æ ¼è¨ˆç®—

---

### 14. strategy/ - ç­–ç•¥å¼•æ“

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `types.go` | ç­–ç•¥ä»‹é¢å®šç¾© |
| `engine.go` | ç­–ç•¥å¼•æ“ |
| `config_loader.go` | é…ç½®è¼‰å…¥å™¨ |
| `grid.go` | ç¶²æ ¼ç­–ç•¥ |
| `demo.go` | å‹•é‡ç­–ç•¥ |
| `python_bridge.go` | Python æ©‹æ¥ |
| `grpc_client.go` | gRPC å®¢æˆ¶ç«¯ |
| å…¶ä»–... | |

**åŠŸèƒ½**:
- `LoadStrategies()` - å¾ DB è¼‰å…¥ç­–ç•¥
- `Start()` / `Stop()` - å•Ÿå‹•/åœæ­¢
- `PauseStrategy()` / `ResumeStrategy()` - æš«åœ/æ¢å¾©
- `handleTick()` - è™•ç†è¡Œæƒ…
- `UpdateParams()` - æ›´æ–°åƒæ•¸
- Python ç­–ç•¥é€é gRPC

---

## ğŸ”¶ Pkg å¥—ä»¶è©³æƒ…

### 1. binance/ - Binance å®¢æˆ¶ç«¯

**åŠŸèƒ½**:
- REST API èª¿ç”¨
- WebSocket é€£ç·š

---

### 2. cache/ - ç·©å­˜

**åŠŸèƒ½**:
- è¨˜æ†¶é«”ç·©å­˜
- è¡Œæƒ…æ•¸æ“šå¿«å–

---

### 3. config/ - é…ç½®

**åŠŸèƒ½**:
- ç’°å¢ƒè®Šé‡è¼‰å…¥
- `.env` æ–‡ä»¶æ”¯æ´
- Testnet/Mainnet åˆ‡æ›

---

### 4. db/ - è³‡æ–™åº«

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `db.go` | é€£ç·šç®¡ç† |
| `schema.go` | è¡¨çµæ§‹å®šç¾© |
| `models.go` | CRUD æ“ä½œ |
| `migrations/` | é·ç§»è…³æœ¬ |

**è³‡æ–™è¡¨**:
- `users` - ç”¨æˆ¶
- `connections` - äº¤æ˜“æ‰€é€£ç·š
- `strategy_instances` - ç­–ç•¥å¯¦ä¾‹
- `strategy_states` - ç­–ç•¥ç‹€æ…‹
- `strategy_positions` - ç­–ç•¥æŒå€‰
- `orders` - è¨‚å–®
- `trades` - æˆäº¤
- `positions` - å…¨å±€æŒå€‰
- `risk_configs` - é¢¨æ§é…ç½®
- `risk_metrics` - é¢¨æ§æŒ‡æ¨™

---

### 5. exchanges/ - äº¤æ˜“æ‰€ Gateway

| å­ç›®éŒ„ | åŠŸèƒ½ |
|--------|------|
| `common/` | é€šç”¨é¡å‹å®šç¾© |
| `binance/spot/` | Binance ç¾è²¨ |
| `binance/futures_usdt/` | USDT æ°¸çºŒåˆç´„ |
| `binance/futures_coin/` | å¹£æœ¬ä½åˆç´„ |

**é€šç”¨é¡å‹**:
- `Side` - BUY/SELL
- `OrderType` - MARKET/LIMIT/STOP_LOSS...
- `TimeInForce` - GTC/IOC/FOK/GTX (æ–°)
- `OrderStatus` - NEW/FILLED/CANCELED...

**Gateway ä»‹é¢**:
- `SubmitOrder()` - æäº¤è¨‚å–®
- `CancelOrder()` - å–æ¶ˆè¨‚å–®
- `GetOpenOrders()` - æŸ¥è©¢æ›å–®
- `GetPosition()` - æŸ¥è©¢æŒå€‰
- `GetBalance()` - æŸ¥è©¢é¤˜é¡

---

### 6. license/ - æˆæ¬Š

**åŠŸèƒ½**:
- æ©Ÿå™¨ç¢¼ç”Ÿæˆ
- JWT Token ç”Ÿæˆ
- æˆæ¬Šç®¡ç† (éª¨æ¶)

---

### 7. market/ - å¸‚å ´æ•¸æ“š

**åŠŸèƒ½**:
- Kç·šæ•¸æ“šçµæ§‹
- è¡Œæƒ…æ•¸æ“šè™•ç†

---

## ğŸ“Š åŠŸèƒ½çµ±è¨ˆ

| é¡åˆ¥ | æ•¸é‡ |
|------|------|
| Internal æ¨¡çµ„ | 14 |
| Pkg å¥—ä»¶ | 7 |
| API ç«¯é» | 20+ |
| äº‹ä»¶é¡å‹ | 6 |
| è³‡æ–™è¡¨ | 10 |
| äº¤æ˜“æ‰€ Gateway | 3 |
